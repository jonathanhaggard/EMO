<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no,minimal-ui">
    <meta name="theme-color" content="#000000">
    <meta name="msapplication-navbutton-color" content="#000000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="robots" content="noindex">

    <title>Matter.js Demo</title>

    <!-- Libs -->
    <script type="text/javascript" src="./lib/decomp.js"></script>
    <script type="text/javascript" src="./lib/pathseg.js"></script>

    <!-- Matter -->
    <script src="./js/matter.js"></script>


    <!-- MatterTools -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <!-- Plugins -->
    <script src="./lib/matter-wrap.js"></script>


    <script>
    window.addEventListener('load', function() {

    	//Fetch our canvas
    	var canvas = document.getElementById('world');
      var cannyw = window.innerWidth;
      var cannyh = window.innerHeight;
      var Engine = Matter.Engine,
          Render = Matter.Render,
          Runner = Matter.Runner,
          Common = Matter.Common,
          Events = Matter.Events,
          MouseConstraint = Matter.MouseConstraint,
          Mouse = Matter.Mouse,
          World = Matter.World,
          Vertices = Matter.Vertices,
          Svg = Matter.Svg,
          Bodies = Matter.Bodies;
      function percentX(percent) {
        return Math.round(percent/100 * window.innerWidth);
      }
      function percentY(percent) {
        return Math.round(percent/100 * window.innerHeight);
      }
      var scaler = percentY(100/1000);
      var Svg = Matter.Svg;
    	//Setup Matter JS
    	var engine = Matter.Engine.create();
    	var world = engine.world;
    	var render = Matter.Render.create({
    		canvas: canvas,
    		engine: engine,
    		options: {
    			width: cannyw,
    			height: cannyh,
    			background: 'transparent',
    			wireframes: false,
    			showAngleIndicator: false
    		}
    	});

      engine.world.gravity.y = -0.00002;
      engine.world.gravity.x = 0.00001;



      var svgs = [
          'enjoyment',
          'fear',
          'anger',
          'sadness',
          'disgust'
      ];

      if (typeof $ !== 'undefined') {
          for (var i = 0; i < svgs.length; i += 1) {
              (function(i) {
                  $.get('./svg/' + svgs[i] + '.svg').done(function(data) {
                      var vertexSets = [],
                          color = Matter.Common.choose(['#000000']);

                      $(data).find('path').each(function(i, path) {
                          var points = Svg.pathToVertices(path, 10);
                          vertexSets.push(Matter.Vertices.scale(points, scaler, scaler));
                      });
                      var Thingers = Matter.Bodies.fromVertices(percentX(100/5) + i * 200, percentY(100/4) + i * 50, vertexSets, {
                        density: 1.04,
                        friction: 1.01,
                        frictionAir: 0.00001,
                        restitution: 1.1,
                          render: {
                              fillStyle: color,
                              strokeStyle: color,
                              lineWidth: 1
                          }
                        }, true);

                      Matter.World.add(world, [Thingers]);
                  });
              })(i);
          }


      }


      Matter.World.add(world, [

        // x, y, w, h
          Matter.Bodies.rectangle(window.innerWidth/2, -50, window.innerWidth, 100, { isStatic: true }), //top
          Matter.Bodies.rectangle(window.innerWidth/2, window.innerHeight+50, window.innerWidth, 100, { isStatic: true }), //bottom
          Matter.Bodies.rectangle(window.innerWidth+50, window.innerHeight/2, 100, window.innerHeight, { isStatic: true }), //right
          Matter.Bodies.rectangle(-50, window.innerHeight/2, 100, window.innerHeight, { isStatic: true }) //left
      ]);



    	//Make interactive
    	var mouseConstraint = Matter.MouseConstraint.create(engine, { //Create Constraint
    		element: canvas,
    		constraint: {
    			render: {
    	        	visible: false
    	    	},
    	    	stiffness:0.8
    	    }
    	});
      mouseConstraint.mouse.element.removeEventListener("mousewheel", mouseConstraint.mouse.mousewheel);
      mouseConstraint.mouse.element.removeEventListener("DOMMouseScroll", mouseConstraint.mouse.mousewheel);
    	Matter.World.add(world, mouseConstraint);


      Events.on(engine, 'collisionStart', function(event) {

          // var audio = new Audio('./audio/SquareS42.mp3');
          // audio.play();
          var musicFiles = ["./audio/audioone.mp3", "./audio/audiotwo.mp3", "./audio/audiothree.mp3", "./audio/audiofour.mp3", "./audio/audiofive.mp3"];
          var randNum = Math.floor(Math.random()*musicFiles.length)
          var audio = new Audio(musicFiles[randNum]);
          audio.play();
      });

    	//Start the engine
    	Matter.Engine.run(engine);
    	Matter.Render.run(render);

    });

/////////NOISE


    </script>


    <style type="text/css">
      * {
        box-sizing: border-box;
      }
      .matter-header-outer{
        display: none;
      }
      canvas{
        border-radius: 0;
        max-width: none;
        max-height: none;
        width: 100%;
        height: 100vh;
      }
      body {
        margin: 0;
        padding: 0;
      }

      .matter-js-compare-build {
        position: absolute;
        background: none;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        border: 0;
        z-index: 1;
        pointer-events: none;
      }

      .matter-js-compare-build .matter-header-outer {
        display: none;
      }

      .matter-js-compare-build canvas {
        opacity: 0.5;
        background: transparent !important;
      }
    </style>
  </head>
  <body>
<canvas id="world"></canvas>
    <div>
      <h1>
        Lorem ipsum dolor sit amet
      </h1>

      <p>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed scelerisque elit ornare purus pulvinar, eu volutpat massa pretium. Morbi consequat pretium magna vel lobortis. Sed viverra, augue eget luctus malesuada, ante turpis tempor neque, congue egestas ipsum ligula sed dui. Pellentesque et tristique orci. Morbi eu consequat nulla. Morbi auctor consectetur ligula hendrerit efficitur. Duis semper tempus lectus, at dapibus dolor tincidunt id. Curabitur at arcu porta, congue dolor nec, interdum tellus. Aliquam lacinia velit ut nibh cursus volutpat.
      </p>
    </div>
  </body>
</html>
